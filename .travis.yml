language: shell
jobs:
    include:
        -
            os: windows
            script: ['make --version']
            - ls "C/tools/msys64/bin"
            - ls "C/tools/msys64/mingw64/bin"
            - C/tools/msys64/bin/mingw32-make --version
            - make --version
before_script:
    - 'cd $TRAVIS_BUILD_DIR'
before_install:
- |-
    case $TRAVIS_OS_NAME in
        windows)
          [[ ! -f C:/tools/msys64/msys2_shell.cmd ]] && rm -rf C:/tools/msys64
          choco upgrade --no-progress -y msys2
          taskkill //IM gpg-agent.exe //F
          export PATH=/C/tools/msys64/mingw64/bin:$PATH
          export MAKE=mingw32-make
          export make=mingw32-make
          ;;
      esac
before_cache:
- |-
    case $TRAVIS_OS_NAME in
      windows)
        $msys2 pacman --sync --clean --noconfirm
        ;;
    esac
cache:
    directories:
        - $HOME/AppData/Local/Temp/chocolatey
        - /C/tools/msys64
notifications:
    email: false
